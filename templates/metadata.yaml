#cloud-config
local-hostname: "${var.vm-name-prefix}-${count.index}.${var.vm-domain}${count.index}.com"
instance-id: "${var.vm-name-prefix}-${count.index}.${var.vm-domain}${count.index}.com"
network:
  version: 2
  ethernets:
    ens192:
      dhcp4: false
      addresses:
        - "${var.ipv4_address}.$[count.index].5/${var.ipv4_netmask}"
      gateway4: "${var.ipv4_gateway}.$[count.index].1"
      nameservers:
        search: "${var.vm-domain}${count.index}.com"
        addresses: ${dns_server}
growpart:
  mode: auto
  devices: ['/dev/sda2']
  ignore_growroot_disabled: true
wait-on-network:
  ipv4: true
